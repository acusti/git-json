var test = require('tape')
var gitjson = require('../index.js')
var git = gitjson()

test('merge fastforward test',function(assert) {
  assert.plan(2)
  git.init()
  git.save('mydocument', {foo:'bar', val:2})
  git.add('mydocument')
  git.commit('first commit')

  git.branch('test')
  git.checkout('test')
  git.save('mydocument',{foo:'bar',val:3})
  git.add('mydocument')
  git.commit('added one to val to make it 3')
  assert.equal(true,git.ancestor('master'))
  git.merge('master')
  assert.equal(git.refs['test'], git.refs['master'])
})
